<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mizu-OCR | Analizador de Partidas MOBA</title>
    <link rel="stylesheet" href="scr/frontend/style/mainstyle.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js" defer></script>
    <script src="https://docs.opencv.org/4.8.0/opencv.js" defer></script>
</head>
<body class="bg-gradient-to-br from-gray-900 to-black text-white font-sans">
    <div class="container mx-auto px-4 py-8 max-w-7xl">
        <header class="text-center mb-12 slide-down">
            <h1 class="text-4xl md:text-5xl font-bold mb-4 bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent">Mizu-OCR</h1>
            <p class="text-xl text-gray-300">Analiza tus partidas de MOBA con precisión</p>
            <div class="mt-4 flex flex-wrap justify-center gap-3">
                <span class="badge">Mobile Legends</span>
                <span class="badge">Wild Rift</span>
                <span class="badge">Honor of Kings</span>
                <span class="badge">Onmyoji Arena</span>
            </div>
        </header>

        <main class="grid lg:grid-cols-2 gap-10">
            <!-- Sección de Configuración -->
            <section class="bg-gray-800/50 backdrop-blur-sm rounded-2xl shadow-xl p-8">
                <h2 class="text-2xl font-bold text-blue-400 mb-6 flex items-center"><i class="fas fa-cog mr-3"></i>Configuración</h2>
                <div class="space-y-6">
                    <div>
                        <label for="gameSelect" class="block text-sm font-medium mb-2">Juego</label>
                        <select id="gameSelect" class="w-full select-input">
                            <option value="auto">Detección automática</option>
                            <option value="honor">Honor of Kings</option>
                            <option value="wildrift">Wild Rift</option>
                            <option value="ml">Mobile Legends</option>
                            <option value="onmyoji">Onmyoji Arena</option>
                        </select>
                    </div>
                    <div>
                        <label for="processingMode" class="block text-sm font-medium mb-2">Modo de procesamiento</label>
                        <select id="processingMode" class="w-full select-input">
                            <option value="frontend">Frontend (Tesseract.js)</option>
                            <option value="backend">Backend (PaddleOCR) - Próximamente</option>
                        </select>
                    </div>
                    <div class="text-center">
                        <label for="fileInput" class="upload-label">
                            <i class="fas fa-cloud-upload-alt text-blue-400 text-5xl mb-4"></i>
                            <p>Arrastra tu imagen aquí o haz clic para seleccionar</p>
                        </label>
                        <input type="file" id="fileInput" accept="image/*" class="hidden">
                    </div>
                    <div id="imagePreview" class="hidden mt-4">
                        <img id="previewImg" class="max-h-48 mx-auto rounded-lg" alt="Vista previa">
                    </div>
                </div>
            </section>

            <!-- Sección de Resultados -->
            <section class="bg-gray-800/50 backdrop-blur-sm rounded-2xl shadow-xl p-8">
                <h2 class="text-2xl font-bold text-green-400 mb-6 flex items-center"><i class="fas fa-cogs mr-3"></i>Resultados</h2>
                
                <!-- Barra de progreso -->
                <div id="progressContainer" class="hidden mb-6">
                    <div class="flex justify-between text-sm text-gray-400 mb-2">
                        <span id="progressStatus">Iniciando OCR...</span>
                        <span id="progressValue">0%</span>
                    </div>
                    <div class="w-full bg-gray-600 rounded-full h-2.5">
                        <div id="progressBar" class="bg-green-500 h-2.5 rounded-full progress-bar" style="width: 0%"></div>
                    </div>
                </div>

                <!-- Resultados -->
                <div id="resultsContent" class="hidden">
                    <div class="bg-gray-900/70 rounded-xl p-4 mb-6">
                        <h3 class="text-lg font-semibold text-gray-200 mb-2">Texto Extraído</h3>
                        <pre id="ocrResult" class="text-sm whitespace-pre-wrap text-gray-200 font-mono overflow-y-auto h-32 p-2 rounded border border-gray-700"></pre>
                    </div>
                    <div class="flex space-x-3">
                        <button id="copyBtn" class="flex-1 btn btn-blue"><i class="fas fa-copy mr-2"></i> Copiar</button>
                        <button id="downloadBtn" class="flex-1 btn btn-purple"><i class="fas fa-download mr-2"></i> Descargar</button>
                        <button id="clearBtn" class="flex-1 btn btn-gray"><i class="fas fa-trash-alt mr-2"></i> Limpiar</button>
                    </div>
                </div>

                <!-- Placeholder -->
                <div id="placeholder" class="h-64 flex items-center justify-center text-gray-500 text-center">
                    <div class="p-4">
                        <i class="fas fa-file-alt text-4xl mb-2"></i>
                        <p>Los resultados aparecerán aquí</p>
                    </div>
                </div>
            </section>
        </main>

        <!-- Análisis de Partida -->
        <section id="analysisSection" class="hidden fade-in mt-10">
            <div class="bg-gray-800/50 backdrop-blur-sm rounded-2xl shadow-xl p-6">
                <h2 class="text-2xl font-bold text-blue-400 mb-6 flex items-center"><i class="fas fa-chart-line mr-3"></i> Análisis de Partida</h2>
                <div class="grid md:grid-cols-5 gap-4 mb-8">
                    <div class="stat-card">
                        <div class="text-2xl font-bold text-green-400" id="matchDate">--/--/--</div>
                        <div class="text-gray-400 text-xs mt-1">FECHA</div>
                    </div>
                    <div class="stat-card">
                        <div class="text-2xl font-bold text-blue-400" id="matchDuration">--:--</div>
                        <div class="text-gray-400 text-xs mt-1">DURACIÓN</div>
                    </div>
                    <div class="stat-card">
                        <div class="text-2xl font-bold text-purple-400" id="matchType">--</div>
                        <div class="text-gray-400 text-xs mt-1">TIPO</div>
                    </div>
                    <div class="stat-card">
                        <div class="text-2xl font-bold text-yellow-400" id="mvpKda">--/--/--</div>
                        <div class="text-gray-400 text-xs mt-1">MVP</div>
                    </div>
                    <div class="stat-card">
                        <div class="text-2xl font-bold text-red-400" id="matchKda">--</div>
                        <div class="text-gray-400 text-xs mt-1">PUNTUACIÓN</div>
                    </div>
                </div>
                <div id="playersTableContainer" class="overflow-x-auto">
                    <table id="playersTable" class="w-full text-left border border-gray-700 rounded-lg overflow-hidden hidden">
                        <thead class="bg-gray-700">
                            <tr>
                                <th class="p-3">Jugador</th>
                                <th class="p-3">Campeón</th>
                                <th class="p-3">Nivel</th>
                                <th class="p-3">K/D/A</th>
                                <th class="p-3">Puntuación</th>
                                <th class="p-3">MVP</th>
                            </tr>
                        </thead>
                        <tbody id="playersTableBody"></tbody>
                    </table>
                </div>
            </div>
        </section>
    </div>

    <!-- Overlay de procesamiento -->
    <div id="processingOverlay" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center hidden z-50">
        <div class="bg-gray-800 rounded-xl p-8 text-center max-w-md">
            <div class="flex justify-center mb-4">
                <div class="w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"></div>
            </div>
            <p class="text-xl font-semibold text-blue-400" id="overlayStatus">Inicializando...</p>
            <div class="w-full bg-gray-700 rounded-full h-2.5 mt-4">
                <div id="overlayProgressBar" class="bg-blue-600 h-2.5 rounded-full" style="width: 0%"></div>
            </div>
        </div>
    </div>

    <script src="app.js" defer></script>
</body>
</html>
